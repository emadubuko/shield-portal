@{
    Layout = "~/Views/Shared/_dmpLayoutPage.cshtml";
}
 
<div class="col-lg-9">
    <div class="panel panel-warning">
        <div class="panel-heading clearfix">
            <h4 class="panel-title">Data Management Plans &nbsp;&nbsp;&nbsp;</h4>
        </div>
        <div class="panel-body">
            <div class="table-responsive">
                <table id="dmpList" class="table table-striped table-hover dataTables-example">
                    <thead>
                        <tr style="color:darkorange; text-transform:capitalize;">
                            <th>Document Title</th>
                            <th>Mechanism Name</th>
                            <th>IP</th>
                            <th>Created By</th>
                            <th>Date Created</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (ShieldPortal.ViewModel.DMPViewModel item in Model)
                        {
                            <tr onclick="window.document.location='/DMP/DMPDetails?dmpId=@item.Id';" style="cursor: pointer;">
                                <td>@item.Title</td>
                                <td>@item.ProjectTitle</td>
                                <td>@item.Owner</td>
                                <td>@item.CreatedBy</td>
                                <td>@item.DateCreated</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts
{
    <script src="~/Scripts/jquery.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/plugins/metismenu/js/jquery.metisMenu.js"></script>
    <script src="~/Scripts/loader.js"></script>
    @Scripts.Render("~/bundles/CreateDMPJs")
    @Scripts.Render("~/bundles/dataTables")
    <script>
        $(document).ready(function () {
            $("#dmpCreate").click(function (e, n) {
                $("#loadImg").show();
                $('#dmpCreate').disabled = true;
            });
        });
    </script>
    <script>
        $(document).ready(function () {

            $("#userdetail").click(function (e) {
                window.document.location = '/Profile/ProfileDetail?profileId=@ShieldPortal.Services.Utils.LoggedinProfileID'; //profile.Id;
            });

            $('#changepassword').click(function () {
                window.document.location = '/Account/ResetPassword';
            });

            $("#logoff").click(function (e, n) {
                var someUrl = '@Url.Action("CreateNewProfile", "Profile")';
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("LogOff", "Account")',
                    contentType: "application/json; charset=utf-8",
                    cache: false,
                }).done(function (dmpId) {
                    window.location.replace('@Url.Action("index", "Home")');
                }).error(function (xhr, status, err) {
                    alert(err);
                    console.log(err);
                });
                return false;
            });
        });
    </script>
}