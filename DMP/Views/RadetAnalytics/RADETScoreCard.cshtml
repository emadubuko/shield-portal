
@{
    Layout = "~/Views/Shared/_radetLayoutPage.cshtml";
}


<div class="col-sm-12">
    <div class="col-lg-9">
        <div class="panel panel-info">
            <div class="panel-heading clearfix">
                <h4 class="panel-title" style="margin-left: 20%;">RADET Submission Score Card</h4>
            </div>
            <div class="panel-body">
                <div class="table-responsive">
                    @*<i style="color: mediumblue;margin-left: 30%;font-size: 17px;">Q4 FY17</i>
                    <hr />
                    <table id="scorecardQ4" class="table table-striped table-hover" style="font-size: 12px;">
                        <thead>
                            <tr style="text-transform:capitalize;">
                                <th> Partners </th>
                                <th> Report Period </th>
                                <th> Facilities Submitted</th>
                                <th> Total ART Sites </th>
                                <th>% completion</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>

                    <hr />
                    <i style="color: mediumblue;margin-left: 30%;font-size: 17px;">Q3 FY17</i>
                    <hr />
                    <table id="scorecardQ3" class="table table-striped table-hover" style="font-size: 12px;">
                        <thead>
                            <tr style="text-transform:capitalize;">
                                <th> Partners </th>
                                <th> Report Period </th>
                                <th> Facilities Submitted</th>
                                <th> Total ART Sites </th>
                                <th>% completion</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>*@

                    <hr />
                    <i style="color: mediumblue;margin-left: 30%;font-size: 17px;">Q1 FY18</i>
                    <hr />
                    <table id="scorecardQ1" class="table table-striped table-hover" style="font-size: 12px;">
                        <thead>
                            <tr style="text-transform:capitalize;">
                                <th> Partners </th>
                                <th> Report Period </th>
                                <th> Facilities Submitted</th>
                                <th> Total ART Sites </th>
                                <th>% completion</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>

                </div>
            </div>
        </div>
    </div>

    
</div>

@section Scripts
{

    <script>
        $(document).ready(function () {

            $.ajax({
                url: "/RadetAnalytics/RADETScoreCardData",
                method: "Post",
                contentType: "application/json",
                success: function (data) {
                    var jsonHtmlTable = buildTable(JSON.parse(data))
                }
            });
            
            function buildTable(dataList) {
                $("#scorecard tbody").empty();
                $.each(dataList, function (i, d) { 
                    var html = "<tr> ";                     
                    html += "<td>" + d.ShortName + "</td>";
                    html += "<td>" + d.RadetPeriod + "</td>";
                    html += "<td>" + d.FacilityCount + "</td>";
                    html += "<td>" + d.ARTSites + "</td>";
                    if ((parseInt(d.FacilityCount) / parseInt(d.ARTSites)) == 1) {
                        html += "<td style='background-color:limegreen;color:#fff;text-align: center;'>" + (100 * parseInt(d.FacilityCount) / parseInt(d.ARTSites)).toFixed(1) + " %</td>";
                    }
                    else {
                        html += "<td style='background-color:red;color:#fff;text-align: center;'>" + (100 * parseInt(d.FacilityCount) / parseInt(d.ARTSites)).toFixed(1) + "% </td>";
                    }                    
                    html += "</tr>";
                    if (d.RadetPeriod == "Q4 FY18") {
                        $("#scorecardQ4 tbody").append(html);
                    }
                    else if (d.RadetPeriod == "Q3 FY18") {
                        $("#scorecardQ3 tbody").append(html);
                    }
                    else if (d.RadetPeriod == "Q2 FY18") {
                        $("#scorecardQ2 tbody").append(html);
                    }
                    else if (d.RadetPeriod == "Q1 FY18") {
                        $("#scorecardQ1 tbody").append(html);
                    }
                });
            }

        });
    </script>
}
