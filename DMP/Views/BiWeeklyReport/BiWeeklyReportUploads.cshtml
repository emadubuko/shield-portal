@model ShieldPortal.ViewModel.BWR.BiWeeklyReportUploadViewModel
@{
    Layout = "~/Views/Shared/_bwrLayout.cshtml";
}

@section AddToHead{ 
    <link href="~/Content/jquery-ui.css" rel="stylesheet" />

    <style>        
        th.rotate {
            height: 90px;
            white-space: nowrap;
        }
            th.rotate > div {
                transform: rotate(-90deg);
                width: 30px;
            }
                th.rotate > div > span {
                    padding: 5px 10px;
                }

        .btn-sm, .btn-group-sm > .btn {
            padding: 0px;
        }
        .btn-danger {
            background-color: #ff6a00;
            border-color: #ff6a00;
           cursor: default;
        }
         
    </style>

    <script type="text/javascript">
        function reloadPage(e) {
            window.location.replace('/BiWeeklyReport/BiWeeklyReportUploads?fYear=' + e.value);
        }
    </script>
}
   

<div class="col-sm-12"> 
        <div class="col-sm-2">
            <label>Financial Year</label>
            <select id="fYear" required onchange="reloadPage(this)">
                <option value="" disabled selected>Finacial year</option>
                @foreach (var item in Model.Year)
                {
                    if (item == Model.SelectedYear)
                    {
                        <option value="@item" selected>@item</option>
                    }
                    else
                    {
                        <option value="@item">@item</option>
                    }
                }
            </select>
        </div>   
    <div style="padding-left: 30%; font-weight: bolder;">
        Report Upload Tracker
    </div>
    <div class="table-responsive" style="overflow-x: initial;">
        <table style="width:100%" class="table table-striped table-bordered">
            <thead>
                <tr style="color: #FFF;background-color: darkorange;border-color: darkorange;">
                    <th></th>
                    <th>IP</th>
                    @foreach (string item in ViewBag.IndexPeriods)
                    {
                        <th class="rotate"><div><span>@item</span></div></th>
                    }
                </tr>
            </thead>
            <tbody>

                @foreach (var item in Model.IPReports)
                {
                    <tr>
                        <td><a href="~/BiWeeklyReport/BiWeeklyReportDownload?IP=@item.Key&fYear=@Model.SelectedYear" class="btn btn-sm btn-danger" style="text-transform:capitalize"><i class="icon-download"></i>Download</a></td>
                        <td>@item.Key</td>
                        @foreach (var date in item.Value)
                        {
                            if (date)
                            {
                                <td><a class="btn btn-sm btn-success"><i class="icon-check"></i></a></td>
                            }
                            else
                            {
                                <td><a class="btn btn-sm btn-danger"><i class="icon-cancel"></i></a></td>
                            }
                        }
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
     