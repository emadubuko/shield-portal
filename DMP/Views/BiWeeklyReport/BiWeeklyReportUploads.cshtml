@model ShieldPortal.ViewModel.BWR.BiWeeklyReportUploadViewModel


@section AddToHead{
    @Styles.Render("~/bundles/CreateDMPCss")
    <link href="~/Content/jquery-ui.css" rel="stylesheet" />

    <style>
        .form-control {
            border-color: #29b6f6;
        }

        form {
            color: #000;
        }

        th.rotate {
            height: 90px;
            white-space: nowrap;
        }

            th.rotate > div {
                transform: rotate(-90deg);
                width: 30px;
            }

                th.rotate > div > span {
                    padding: 5px 10px;
                }

        .btn-sm, .btn-group-sm > .btn {
            padding: 0px;
        }
    </style>

    <script type="text/javascript">
        function reloadPage(e) {
            window.location.replace('/BiWeeklyReport/BiWeeklyReportUploads?fYear=' + e.value);
        }
    </script>
}
 
<div id="page-wrapper" class="main-content">
     
        <label>Financial Year</label>
        <select id="fYear" required onchange="reloadPage(this)">
            <option value="" disabled selected>Finacial year</option>
            @foreach (var item in Model.Year)
            {
                if (item == Model.SelectedYear)
                {
                    <option value="@item" selected>@item</option>
                }
                else
                {
                    <option value="@item">@item</option>
                }
            }
        </select> 

    <div style="padding-left: 30%; font-weight: bolder;">
        REPORT UPLOADS
    </div>
    <div class="table-responsive" style="overflow-x: initial;">
        <table style="width:100%" class="table table-striped table-bordered">
            <thead>
                <tr style="color: #FFF;background-color: #29b6f6;border-color: #29b6f6;">
                    <th></th>
                    <th>IP</th>
                    @foreach (string item in ViewBag.IndexPeriods)
                    {
                        <th class="rotate"><div><span>@item</span></div></th>
                    }
                </tr>
            </thead>
            <tbody>

                @foreach (var item in Model.IPReports)
                {
                    <tr>
                        <td><a href="~/BiWeeklyReport/BiWeeklyReportDownload?IP=@item.Key&fYear=@Model.SelectedYear" class="btn btn-sm btn-info"><i class="icon-download"></i>Download</a></td>
                        <td>@item.Key</td>
                        @foreach (var date in item.Value)
                        {
                            if (date)
                            {
                                <td><a class="btn btn-sm btn-success"><i class="icon-check"></i></a></td>
                            }
                            else
                            {
                                <td><a class="btn btn-sm btn-danger"><i class="icon-cancel"></i></a></td>
                            }
                        }
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>




@section Scripts
{
    @Scripts.Render("~/bundles/CreateDMPJs")
    <script>
        $(document).ready(function () {

            $(".page-container").attr('class', 'page-container sidebar-collapsed');
             
        });
    </script>
}