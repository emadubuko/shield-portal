@model  ShieldPortal.ViewModel.EditDocumentViewModel2
@{
    ViewBag.Title = "Edit Documnet";
}
@section AddToHead{
    @Styles.Render("~/bundles/CreateDMPCss") 
<link href="~/Content/jquery-ui.css" rel="stylesheet" />
    <style>
        .wizard-navbar > ul li.completed a span {
            background-color: steelblue;            
        }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    input[type="number"] {
        -moz-appearance: textfield;
    }
    .modifiedselect {
        position: absolute;
        top: 0px;
        width: 85%;
        height: 31px;
        padding-left: 12px;
        color: black;
        border-right-style: none;
        border-top-width: thin;
    }
    .reportingleveldrpdn{
        font-weight:bold;
    }
     
    </style>

    <script src="~/Scripts/Ultilities.js"></script>
    <script type="text/javascript">
        var updateUrl;
        var documentID = '@Model.documentID';

        function EnableDisableEthicalApproval(e) {
            if (e.value == "Yes") {
                $("#EthicalApprovalDiv").show();
            }
            else {
                $("#EthicalApprovalDiv").hide();
            }
        }

        function imageSelected(e) {
            imagePreview(e, $('#FlowChartimageURL'));
        }

        function FileUploaded(e){
            let url = '/DMPDocument/SaveFileUpload?documentId='+documentID;
            var result =  uploadfileToServer(e, $('#StaffFile'),url, $("#StaffingInformation"));
        }

        var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        var editMode = true;

        var digitalDataCollectionArrayFromServer = @Html.Raw(Json.Encode(Model.digital));
        var digitalDatacollectionArray = [];

        var nondigitalDataCollectionArrayFromServer = @Html.Raw(Json.Encode(Model.nonDigital));
        var nondigitalDatacollectionArray = [];

        var dasDataCollectionArrayFromServer = @Html.Raw(Json.Encode(Model.dataSharing));
        var dasDatacollectionArray = [];

        var ddocDataCollectionArrayFromServer = @Html.Raw(Json.Encode(Model.dataDocMgt));
        var ddocDatacollectionArray = [];


        let reportingLevelArrayFromServer = @Html.Raw(Json.Encode(Model.reportingLevel));
        let reportingLevelArray = [];

        var rolesArray =  @Html.Raw(Json.Encode(Model.roles));
        var responsibilityArray =  @Html.Raw(Json.Encode(Model.responsibilities));
        var trainingArray =  @Html.Raw(Json.Encode(Model.Trainings));

        var datacollationArrayFromServer = @Html.Raw(Json.Encode(Model.dataCollation));
        var datacollationArray = [];

        var DataCollectionArrayFromServer = @Html.Raw(Json.Encode(Model.dataCollection));
        var datacollectionArray = [];

        var DataVerificationArrayFromServer = @Html.Raw(Json.Encode(Model.dataVerification));
        var DataVerificationArray =[];
       var ReportArrayFromServer =  @Html.Raw(Json.Encode(Model.reportDataList));
        var reportArray = [];

        function DeleteRow(row) {
              if(row.id.indexOf("report") !== -1){
            var rowid = row.id.split('x')[1];
                $(row).remove();
                reportArray.splice(rowid-1, 1);
            }
            else  if(row.id.indexOf('datacollation') !==-1){
                $(row).remove();
                var rowid = row.id.split('x')[1];
                datacollationArray.splice(row-1, 1);
            }
            else  if(row.id.indexOf('dataverification') !==-1){
                $(row).remove();
                var rowid = row.id.split('x')[1];
                DataVerificationArray.splice(row-1, 1);
            }
            else  if(row.id.indexOf('training') !== -1){
                var rowid = row.id.split('x')[1];
                $(row).remove();
                trainingArray.splice(row-1, 1);
            }
        }
    </script>

}
<div class="main-content">
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-warning">
                <div class="panel-heading clearfix">
                    <h4 class="panel-title">Complete the DMP Document</h4>
                </div>
                <div class="panel-body">
                    <form id="rootwizard-2" class="form-wizard validate-form-wizard validate" novalidate="novalidate">
                        <div class="wizard-navbar">
                            <ul class="wizard-steps">
                                <li class="active"><a href="#ProjectProfile" data-toggle="tab" aria-expanded="false"><span>1</span> Project Profile</a></li>
                                <li><a href="#ProgramObjectives" data-toggle="tab"><span>2</span>Program Objectives</a></li>
                                <li><a href="#MonitoringEvaluationSystems" data-toggle="tab"><span>3</span>M & E Systems</a></li>
                                <li><a href="#DataProcesses" data-toggle="tab"><span>4</span>Data Processes</a></li>
                                <li><a href="#QualityAssurance" data-toggle="tab"><span>5</span>Quality Assurance</a></li>
                                <li><a href="#DataStorageAccessAndSharing" data-toggle="tab"><span>6</span>Data Storage</a></li>
                                <li><a href="#IntellectualPropertyCopyrightAndOwnership" data-toggle="tab"><span>7</span>Copyright</a></li>
                                <li><a href="#PostProjectDataRetentionSharingAndDestruction" data-toggle="tab"><span>8</span>Data Retention</a></li>
                            </ul>
                        </div>
                        <hr />

                        <div class="tab-content">
                            <img id="loadImg" style="display:none" class="center" src="~/images/spinner.gif" width="36">

                            <div class="tab-pane active" id="ProjectProfile">
                                <h4 class="panel-title" style="margin-left: 90px;">
                                    <b>Project Profile</b>
                                </h4>
                                <hr />
                                <div class="panel panel-warning" id="ProjectDetails">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Project Details</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="ProjectTitle">Project Title</label>
                                                <div class="col-sm-9">
                                                    <input type="text" placeholder="Project Title" value="@Model.projectDetails.ProjectTitle" id="ProjectTitle" required class="form-control">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="DocumentTitle">Document Title</label>
                                                <div class="col-sm-9">
                                                    <input type="text" placeholder="Document Title" id="DocumentTitle" value="@Model.projectDetails.DocumentTitle" required class="form-control">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="organization">Organization</label>
                                                <div class="col-sm-9">
                                                    <input type="text" id="organization" disabled value="@Model.Organization.Name" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="organization">Abreviation of Implementing Partner</label>
                                                <div class="col-sm-9">
                                                    <input type="text" id="organization" disabled value="@Model.Organization.ShortName" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="MissionPartner">Mission Partner</label>
                                                <div class="col-sm-9">
                                                    <input type="text" id="MissionPartner" disabled value="@Model.Organization.MissionPartner" class="form-control">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="leadactivitymanagerId">Lead Activity Manager</label>
                                                <div class="col-sm-9">
                                                    <select id="leadactivitymanagerId" class="form-control">
                                                        <option value="" disabled selected>Select Lead activity manager</option>
                                                        @foreach (var item in Model.Profiles)
                                                        {
                                                            if (Model.projectDetails.LeadActivityManager != null && @item.Key == Model.projectDetails.LeadActivityManager.Id)
                                                            {
                                                                <option value="@item.Key" selected>@item.Value.FullName</option>
                                                            }
                                                            else
                                                            {
                                                                <option value="@item.Key">@item.Value.FullName</option>
                                                            }
                                                        }
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="AddressofOrganization">Address of Organization</label>
                                                <div class="col-sm-9">
                                                    <input type="text" id="AddressofOrganization" disabled value="@Model.Organization.Address" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="AddressofOrganization">Phone Number</label>
                                                <div class="col-sm-9">
                                                    <input type="text" id="PhoneNumber" disabled value="@Model.Organization.PhoneNumber" class="form-control">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="ProjectStartDate">Project Start Date</label>
                                                <div class="col-sm-9">
                                                    <input id="ProjectStartDate" type="text" placeholder="Project Start Date" value="@Model.projectDetails.ProjectStartDate" class="form-control">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Project End Date</label>
                                                <div class="col-sm-9">
                                                    <input type="text" id="ProjectEndDate" placeholder="Project End Date" value="@Model.projectDetails.ProjectEndDate" data-format="D, dd MM yyyy" class="form-control">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="GrantReferenceNumber">Grant Reference Number</label>
                                                <div class="col-sm-9">
                                                    <input type="text" placeholder="Grant Reference Number" id="GrantReferenceNumber" value="@Model.projectDetails.GrantReferenceNumber" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end of project details section-->

                                <div class="panel panel-warning" id="EthicsApproval">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Ethics Approval</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="EthicalApprovalForTheProject">Ethical Approval For the Project</label>
                                                <div class="col-sm-5">
                                                    <select id="EthicalApprovalForTheProject" onchange="EnableDisableEthicalApproval(this)" class="form-control">
                                                        <option value="" selected disabled>Do you have ethical approval for this project? </option>
                                                        @if (Model.ethicsApproval != null)
                                                        {
                                                            foreach (var item in Model.YesNoOption)
                                                            {
                                                                if (@item == Model.ethicsApproval.EthicalApprovalForTheProject)
                                                                {
                                                                    <option value="@item" selected>&nbsp;@item</option>
                                                                }
                                                                else
                                                                {
                                                                    <option value="@item">&nbsp;@item</option>
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            foreach (var item in Model.YesNoOption)
                                                            {
                                                                <option value="@item">&nbsp;@item</option>
                                                            }
                                                        }
                                                    </select>
                                                </div>
                                            </div>

                                            <div id="EthicalApprovalDiv">

                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label" for="Rational">Rational</label>
                                                    <div class="col-sm-5">
                                                        <select class="form-control" onchange="document.getElementById('Rational').value=this.options[this.selectedIndex].text;">
                                                            <option value=""></option>
                                                            <option value="" disabled>please specify if not on the list</option>
                                                            @foreach (var item in Model.rational)
                                                            {
                                                                <option value="@item">&nbsp;@item</option>
                                                            }
                                                        </select>
                                                        <input id="Rational" value="@(Model.ethicsApproval!=null ? Model.ethicsApproval.Rational : "")" placeholder="What is the rational for approval" class="modifiedselect" onfocus="this.select()" type="text">
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label" for="AprrovingInstititionalReviewBoard">Aprroving Instititional Review Board</label>
                                                    <div class="col-sm-5">
                                                        <select class="form-control" onchange="document.getElementById('AprrovingInstititionalReviewBoard').value=this.options[this.selectedIndex].text;">
                                                            <option value=""></option>
                                                            <option value="" disabled>please specify if not on the list</option>
                                                            @foreach (var item in Model.reviewBoard)
                                                            {
                                                                <option value="@item">&nbsp;@item</option>
                                                            }
                                                        </select>
                                                        <input id="AprrovingInstititionalReviewBoard" value="@(Model.ethicsApproval!=null ? Model.ethicsApproval.AprrovingInstititionalReviewBoard : "")" placeholder="Select approving board" class="modifiedselect" onfocus="this.select()" type="text">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label" for="TypeOfEthicalApproval">Type of Ethical Approval</label>
                                                    <div class="col-sm-5">
                                                        <select class="form-control" onchange="document.getElementById('TypeOfEthicalApproval').value=this.options[this.selectedIndex].text;">
                                                            <option value=""></option>
                                                            <option value="" disabled>please specify if not on the list</option>
                                                            @foreach (var item in Model.ethicalApprovalTypes)
                                                            {
                                                                <option value="@item">&nbsp;@item</option>
                                                            }
                                                        </select>
                                                        <input id="TypeOfEthicalApproval" value="@(Model.ethicsApproval!=null ? Model.ethicsApproval.TypeOfEthicalApproval : "")" placeholder="Select approving board" class="modifiedselect" onfocus="this.select()" type="text">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--End of ethic approval section-->
                            </div>
                            <!-- end of Project profile page-->

                            <div class="tab-pane" id="ProgramObjectives">
                                <h4 class="panel-title" style="margin-left: 70px;">
                                    <b>Program Objectives</b>
                                </h4>
                                <hr />
                                <div class="panel panel-warning" id="Summary">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Summary</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="ProjectObjectives" class="control-label">Project Objectives</label> &nbsp;
                                                    <button type="button" class="btn btn-black btn-outline btn-sm" title="Describe program objectives and strategies to be employed in meeting the objectives."><i class="icon-help"></i></button>

                                                    @if (@Model.summary == null)
                                                    {
                                                        <textarea id="ProjectObjectives" placeholder="summarize in not more than 500 words" class="form-control" rows="3"></textarea>
                                                    }
                                                    else
                                                    {
                                                        <textarea id="ProjectObjectives" placeholder="summarize in not more than 500 words" class="form-control" rows="3">@Model.summary.ProjectObjectives</textarea>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end of Summary section-->
                            </div>
                            <!-- end of Planning page-->

                            <div class="tab-pane" id="MonitoringEvaluationSystems">
                                <div class="panel panel-warning">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title" style="margin-left: 70px;">
                                            <b>Monitoring & Evaluation Systems (M&E)</b>
                                        </h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="panel panel-warning" id="People">
                                            <div class="panel-heading clearfix">
                                                <h4 class="panel-title">People</h4>
                                            </div>
                                            <div class="panel-body">
                                                <div class="form-horizontal">
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="DataFlowChart">Data flow chart</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Describe the levels of data flow using a Flow Chart diagram  e.g Facility--LGA--State--National"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <input type="file" onchange="imageSelected(this)" accept="image/*" id="DataFlowChart" class="form-control">
                                                            <img id="FlowChartimageURL" height="100">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="StaffFile">Staff Information</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Upload an excel file describing staffs roles and scheduled training"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <input type="file" onchange="FileUploaded(this)" accept=".xls,.xlsx" id="StaffFile" class="form-control">
                                                            <input type="text" id="StaffingInformation" value="@(Model.People != null ? Model.People.StaffingInformation : "")" hidden>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="panel panel-warning" id="roles">
                                                    <div class="panel-heading clearfix">
                                                        <h4 class="panel-title">Roles</h4>
                                                    </div>
                                                    <div class="panel-body">
                                                        <div class="table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr style="color: #FFF;background-color: steelblue;border-color: steelblue;font-size:10px">
                                                                        <th>Role</th>
                                                                        <th>Site</th>
                                                                        <th>Region/State</th>
                                                                        <th>HQ</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="rolesTable">
                                                                    @if (Model.People != null)
                                                                    {
                                                                        foreach (var item in Model.People.Roles)
                                                                        {
                                                                            <tr>
                                                                                <td>@item.Name</td>
                                                                                <td>@item.SiteCount</td>
                                                                                <td>@item.RegionCount</td>
                                                                                <td>@item.HQCount</td>
                                                                            </tr>
                                                                        }
                                                                    }
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="panel panel-warning" id="resp">
                                                    <div class="panel-heading clearfix">
                                                        <h4 class="panel-title">Responsibility</h4>
                                                    </div>
                                                    <div class="panel-body">
                                                        <div class="table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr style="color: #FFF;background-color: steelblue;border-color: steelblue;font-size:10px">
                                                                        <th>Responsibility</th>
                                                                        <th>Site</th>
                                                                        <th>Region/State</th>
                                                                        <th>HQ</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="respsTable">
                                                                    @if (Model.People != null)
                                                                    {
                                                                        foreach (var item in Model.People.Responsibilities)
                                                                        {
                                                                            <tr>
                                                                                <td>@item.Name</td>
                                                                                <td>@item.SiteCount</td>
                                                                                <td>@item.RegionCount</td>
                                                                                <td>@item.HQCount</td>
                                                                            </tr>
                                                                        }
                                                                    }
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="panel panel-warning" id="Trainings">
                                                    <div class="panel-heading clearfix">
                                                        <h4 class="panel-title">Trainings</h4>
                                                    </div>
                                                    <div class="panel-body">
                                                        <div class="table-responsive">
                                                            <table class="table table-striped table-bordered">
                                                                <thead>
                                                                    <tr style="color: #FFF;background-color: steelblue;border-color: steelblue;font-size:10px">
                                                                        <th>Training</th>
                                                                        <th>Site</th>
                                                                        <th> Region/State</th>
                                                                        <th> HQ</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="trainingTable">
                                                                    @if (Model.People != null)
                                                                     {
                                                                         foreach (var item in Model.People.Trainings)
                                                                         {
                                                                            <tr>
                                                                                <td>@item.NameOfTraining</td>
                                                                                <td>@(item.SiteDisplayDate)</td>
                                                                                <td>@(item.RegionDisplayDate)</td>
                                                                                <td>@(item.HQDisplayDate)</td>
                                                                            </tr>
                                                                         }
                                                                     }
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--End of Tranings section-->
                                            </div>

                                        </div>

                                        <div class="panel panel-warning" id="Process">
                                            <div class="panel-heading clearfix">
                                                <h4 class="panel-title">Process</h4>
                                            </div>
                                            <div class="panel-body">
                                                <div class="form-horizontal">                                                   
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label">Reporting level</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Specify all the reporting levels"><i class="icon-help"></i></button>
                                                        <div class="col-sm-4">
                                                            <input type="text" id="reportingLeveltxt" placeholder="Specify all the reporting levels" class="form-control">
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <a id="reportingLevelbtn" class="btn btn-sm btn-black btn-outline"><i class="icon-list-add"></i>Add to List</a>
                                                        </div>  
                                                    </div>

                                                    <div class="form-group"> 
                                                        <div class="col-sm-offset-3 col-sm-4">
                                                            <div class="table-responsive">
                                                                <table class="table table-striped">
                                                                    <thead>
                                                                        <tr style="font-size: 10px;color: #FFF;background-color: steelblue;border-color: steelblue;">
                                                                            <th>Reporting Levels</th>
                                                                            <th></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody id="reportingLevelTable"> </tbody>
                                                                </table>
                                                            </div>
                                                        </div>                                                        
                                                    </div>
                                                    <hr />

                                                    <div style="display:flex; flex-direction:column; justify-content:center;width: 80%; margin-left: 3%;">
                                                        <h4 style="display:flex; justify-content:center">Data Collation</h4>
                                                        <div class="form-group">
                                                            <label class="col-sm-3 control-label">Reporting level</label>
                                                            <div class="col-sm-7">
                                                                <select id="dtReportingLevel" class="select2 form-control reportingleveldrpdn" multiple data-placeholder="select applicable level">
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-sm-3 control-label" for="DataType">Type of data</label>
                                                            <button type="button" class="btn btn-black btn-outline btn-sm" title="specify data type"><i class="icon-help"></i></button>
                                                            <div class="col-sm-7">
                                                                <input type="text" placeholder="specify data type" id="DataType" value="" class="form-control">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-sm-3 control-label" for="CollationFrequency">Frequency of data collection</label>
                                                            <div class="col-sm-7">
                                                                <select id="CollationFrequency" class="form-control">
                                                                    <option value="" disabled selected>How frequent will data collation be carried out?</option>
                                                                    @foreach (var item in Model.dataFrequency)
                                                                    {
                                                                        <option value="@item">@item</option>
                                                                    }
                                                                </select>
                                                            </div>
                                                            <a class="btn btn-black btn-sm btn-outline" id="adddatacollationbtn">Add to List</a>
                                                        </div>
                                                        <div class="col-sm-offset-3 col-sm-8">
                                                            <div class="table-responsive">
                                                                <table class="table table-striped">
                                                                    <thead>
                                                                        <tr style="color: #FFF;background-color: steelblue;border-color: steelblue; font-size: 10px;">
                                                                            <th>Level</th>
                                                                            <th>Types</th>                                                                            
                                                                            <th>Frequency</th>
                                                                            <th></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody id="datacollationdataTable"> </tbody>
                                                                </table>
                                                            </div>
                                                        </div>                                                        
                                                    </div>
                                                    <hr />

                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="SiteSupport">Site support/Visit</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="select frequency of site support/visits"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <select id="SiteSupport" class="form-control">
                                                                <option value="" selected disabled>select frequency of site support</option>
                                                                @foreach (var item in Model.dataFrequency)
                                                                {
                                                                    if (Model.processes != null && Model.processes.SiteSupport == item)
                                                                    {
                                                                        <option value="@item" selected>&nbsp;@item</option>
                                                                    }
                                                                    else
                                                                    {
                                                                        <option value="@item">&nbsp;@item</option>
                                                                    }
                                                                }
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="DataGarnering">Data garnering</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Describe your data processing, transformation etc"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <textarea type="text" rows="3" id="DataGarnering" placeholder="Describe your data processing, transformation etc" class="form-control">@(Model.processes != null ? Model.processes.DataGarnering : "")</textarea>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="DataUse">Data use</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Describe data use policies"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <textarea type="text" rows="3" id="DataUse" placeholder="Describe data use policies" class="form-control">@(Model.processes != null ? Model.processes.DataUse : "")</textarea>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="DataImprovementApproach">Data improvement approach</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Describe data improvement approach"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <textarea type="text" rows="3" id="DataImprovementApproach" placeholder="Describe data improvement approach" class="form-control">@(Model.processes != null ? Model.processes.DataImprovementApproach : "")</textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="panel panel-warning" id="Equipment">
                                            <div class="panel-heading clearfix">
                                                <h4 class="panel-title">Equipment</h4>
                                            </div>
                                            <div class="panel-body">
                                                <div class="form-horizontal">
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="ProjectEquipments">Project equipments</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Provide details of equipments available for this project"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <select class="form-control" onchange="document.getElementById('ProjectEquipments').value=this.options[this.selectedIndex].text;">
                                                                <option value="" disabled>please specify if not on the list</option>
                                                                @foreach (var item in Model.equipment)
                                                                {
                                                                    <option value="@item">&nbsp;@item</option>
                                                                }
                                                            </select>
                                                            <input id="ProjectEquipments" value="@(Model.Equipment !=null ?Model.Equipment.ProjectEquipments:"")" placeholder="Provide details of equipments available for this project" class="modifiedselect" onfocus="this.select()" type="text">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="panel panel-warning" id="Environment">
                                            <div class="panel-heading clearfix">
                                                <h4 class="panel-title">Environment</h4>
                                            </div>
                                            <div class="panel-body">
                                                <div class="form-horizontal">
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="StatesCoveredByImplementingPartners">States covered by implementing partners</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Check all states covered by IP"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <select id="StatesCoveredByImplementingPartners" class="select2 form-control" data-placeholder="Select all states covered by IP" multiple>
                                                                @foreach (var item in Model.states)
                                                                {
                                                                    if (Model.Environment != null && !string.IsNullOrEmpty(Model.Environment.StatesCoveredByImplementingPartners) && Model.Environment.StatesCoveredByImplementingPartners.Contains(item))
                                                                    {
                                                                <option value="@item" selected>@item</option>
                                                                    }
                                                                    else
                                                                    {
                                                                <option value="@item">@item</option>
                                                                    }
                                                                }
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="panel-heading clearfix">
                                                        <h4 class="panel-title">Number of sites covered by implementing partners</h4>
                                                        <hr />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="ART">ART</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="number site on ART Program"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <input type="number" id="ART" value="@(Model.Environment!=null && Model.Environment.NumberOfSitesCoveredByImplementingPartners!=null ? Model.Environment.NumberOfSitesCoveredByImplementingPartners.ART :0)" placeholder="number site on ART Program" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="PMTCT">PMTCT</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="number of site on PMTCT program"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <input type="number" id="PMTCT" value="@(Model.Environment!=null && Model.Environment.NumberOfSitesCoveredByImplementingPartners!=null ? Model.Environment.NumberOfSitesCoveredByImplementingPartners.PMTCT :0)" placeholder="number of site on PMTCT program" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="HTC">HTC</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="number of site on HTC program"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <input type="number" id="HTC" value="@(Model.Environment!=null && Model.Environment.NumberOfSitesCoveredByImplementingPartners!=null ? Model.Environment.NumberOfSitesCoveredByImplementingPartners.HTC :0)" placeholder="number of site on HTC program" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="OVC">OVC</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="number of site on OVC program"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <input type="number" id="OVC" value="@(Model.Environment!=null && Model.Environment.NumberOfSitesCoveredByImplementingPartners!=null ? Model.Environment.NumberOfSitesCoveredByImplementingPartners.OVC :0)" placeholder="number of site on OVC program" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label" for="Commmunity">Commmunity</label>
                                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="number of site on Commmunity program"><i class="icon-help"></i></button>
                                                        <div class="col-sm-7">
                                                            <input type="number" id="Commmunity" value="@(Model.Environment!=null && Model.Environment.NumberOfSitesCoveredByImplementingPartners!=null ? Model.Environment.NumberOfSitesCoveredByImplementingPartners.Commmunity :0)" placeholder="number of site on Commmunity program" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="panel panel-warning" id="Organization">
                                            <div class="panel-heading clearfix">
                                                <h4 class="panel-title">Organization</h4>
                                            </div>
                                            <div class="panel-body">
                                                <div class="form-horizontal">
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <!-- end of Data M&E page-->

                            <div class="tab-pane" id="DataProcesses">
                                <h4 class="panel-title" style="margin-left: 70px;">
                                    <b>Data Processes</b>
                                </h4>
                                <hr />
                                <div class="panel panel-warning">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Data</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal" id="datacollectionForm">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Reporting level</label>
                                                <div class="col-sm-8">
                                                    <select id="dcReportingLevel" class="select2 form-control reportingleveldrpdn" multiple data-placeholder="select applicable level">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="DataType">Data Type</label>
                                                <div class="col-sm-8">
                                                    <select id="DataType" class="form-control">
                                                        <option value="" disabled selected>What types of data are collected ?</option>
                                                        @foreach (var item in Model.reportDataType)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="DataCollectionAndReportingTools">Data collection and reporting tools</label>
                                                <div class="col-sm-8">
                                                    <select id="DataCollectionAndReportingTools" class="select2 form-control" multiple data-placeholder="What are the sources of your of data?">
                                                        @foreach (var item in Model.dataSourcesTypes)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="DataCollectionProcess">Data collection process</label>
                                                <div class="col-sm-8">
                                                     <textarea id="DataCollectionProcess" rows="3" class="form-control"  placeholder="Describe the data collection process"></textarea>
                                                </div>
                                            </div>   
                                            <div class="col-sm-offset-9">
                                                <a class="btn btn-black btn-sm btn-outline" id="adddatacollectionbtn">Add to list</a>
                                            </div>
                                        </div>

                                        <div class="table-responsive">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr style="color: #FFF;background-color: steelblue;border-color: steelblue;font-size:10px">
                                                        <th>Level</th>
                                                        <th>Data Type</th>
                                                        <th>Reporting Tool</th>
                                                        <th>Process</th>                                                                                                                
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody id="datacollectiondataTable"> </tbody>
                                            </table>
                                        </div>
                                    </div>                                        
                                    </div>
                               

                                <div class="panel panel-warning" id="ReportData">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Reports </h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal" id="reportdatadiv">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Reporting level</label>
                                                <div class="col-sm-8">
                                                    <select id="rptReportingLevel" class="select2 form-control reportingleveldrpdn" multiple data-placeholder="select applicable level">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="ReportsType">Reports type</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="What types of data are collected  & reported on? "><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <select class="form-control" onchange="document.getElementById('ReportsType').value=this.options[this.selectedIndex].text;">
                                                        <option value=""></option>
                                                        <option value="" disabled>please specify if not on the list</option>
                                                        @foreach (var item in Model.reportTypes)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                    <input id="ReportsType" placeholder="What types of data are collected  & reported on?" class="modifiedselect" onfocus="this.select()" type="text">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="ReportsCollated">Reported To</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Data is reported to?"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <select class="form-control" onchange="document.getElementById('ReportedTo').value=this.options[this.selectedIndex].text;">
                                                        <option value=""></option>
                                                        <option value="" disabled>please specify if not on the list</option>
                                                        @foreach (var item in Model.datareported)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                    <input id="ReportedTo" placeholder="Data is reported to?" class="modifiedselect" onfocus="this.select()" type="text">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="ProgramArea">Program Area</label>
                                                <div class="col-sm-8">
                                                    <select id="ProgramArea" class="form-control">
                                                        <option value="" disabled selected>select program area</option>
                                                        @foreach (var item in Model.programArea)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="FrequencyOfReporting">Frequency of reporting</label>
                                                <div class="col-sm-8">
                                                    <select id="FrequencyOfReporting" class="form-control">
                                                        <option value="" disabled selected>State the frequency of reporting</option>
                                                        @foreach (var item in Model.dataFrequency)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="TimelinesForReporting">Milestone</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Clearly state the timelines for this reporting excercise"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <input type="text" placeholder="Clearly state the timelines for this reporting excercise" id="TimelinesForReporting" value="" class="form-control">
                                                    <label style="color:red;">Please select dates corresponding to the frequency selected above</label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="DurationOfReporting">Duration of reporting</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="state the duration of time assigned for reporting? numbers only"><i class="icon-help"></i></button>
                                                <div class="col-sm-2">
                                                    <select id="rptDurationdrpdwn" class="form-control">
                                                        <option value="" disabled selected>Select</option>
                                                        @foreach (var item in Model.Duration)
            {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                                <div class="col-sm-2">
                                                    <input type="number" id="rptDurationField" placeholder="" class="form-control">
                                                </div>
                                                <div class="col-sm-1 col-sm-push-3">
                                                    <a class="btn btn-black btn-sm btn-outline" id='addReportbtn'>Add to list</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr style="color: #FFF;background-color: steelblue;border-color: steelblue;font-size:10px;">
                                                        <th>Level</th>
                                                        <th>Reports Type</th>
                                                        <th>Reported To</th>
                                                        <th>Program Area</th>
                                                        <th>Frequency</th>
                                                        <th>Duration(days)</th>
                                                        <th>Timelines</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody id="reportdataTable"> </tbody>
                                            </table>
                                        </div>

                                    </div>
                                </div>

                            </div>
                            <!-- end of Data Processes page-->

                            <div class="tab-pane" id="QualityAssurance">
                                <h4 class="panel-title" style="margin-left: 70px;">
                                    <b>Quality Assurance</b>
                                </h4>
                                <hr />
                                <div class="panel panel-warning" id="DataVerification">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Data Validation</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal" id="dataVerificationForm">
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label">Reporting level</label>
                                                <div class="col-sm-6">
                                                    <select id="dvReportingLevel" class="select2 form-control reportingleveldrpdn" multiple data-placeholder="select applicable level">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label">Thematic area</label>
                                                <div class="col-sm-6">
                                                    <select id="dvThematicArea" class="select2 form-control" multiple data-placeholder="select applicable area">
                                                        @foreach (var item in Model.thematicAreas)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="DataVerificationApproach">Data validation approach</label>
                                                <div class="col-sm-6">
                                                    <select class="form-control" onchange="document.getElementById('DataVerificationApproach').value=this.options[this.selectedIndex].text;">
                                                        <option value=""></option>
                                                        <option value="" disabled>please specify if not on the list</option>
                                                        @foreach (var item in Model.DataVerificationApproach)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                    <input id="DataVerificationApproach" placeholder="What methodology is employed for data validation?" class="modifiedselect" onfocus="this.select()" type="text">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="TypesOfDataVerification">Types of Data validation</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="What forms and tools are used for verifying data sources"><i class="icon-help"></i></button>
                                                <div class="col-sm-6">
                                                    <input type="text" placeholder="What forms and tools are used for verifying data sources" id="TypesOfDataVerification" value="" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="FrequencyOfDataVerification">Frequency of data validation</label>
                                                <div class="col-sm-6">
                                                    <select id="FrequencyOfDataVerification" class="form-control">
                                                        <option value="" disabled selected>How frequent will data validation be carried out?</option>
                                                        @foreach (var item in Model.dataFrequency)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="TimelinesForDataVerification">Milestones</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Select the applicable timelines for this data validation"><i class="icon-help"></i></button>
                                                <div class="col-sm-6">
                                                    <input type="text" placeholder="What are the timelines for this data validation" id="TimelinesForDataVerification" value="" class="form-control">
                                                    <label style="color:red;">Please select dates corresponding to the frequency selected above</label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-4 control-label" for="DurationOfDataVerificaion">Duration</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="What is the duration of this data validation excercise? numbers only"><i class="icon-help"></i></button>
                                                <div class="col-sm-2">
                                                    <select id="dvDurationdrpdwn" class="form-control">
                                                        <option value="" disabled selected>Select</option>
                                                        @foreach (var item in Model.Duration)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                                <div class="col-sm-2">
                                                    <input type="number" id="dvDurationField" placeholder="" class="form-control">
                                                </div>
                                                <div class="col-sm-1 col-sm-push-2">
                                                    <a class="btn btn-black btn-sm btn-outline" id="addDataVerificationbtn">Add to List</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr style="color: #FFF;background-color: steelblue;border-color: steelblue;font-size:10px;">
                                                        <th>Level</th>
                                                        <th>Thematic area</th>
                                                        <th>Verification Approach</th>
                                                        <th>Types</th>
                                                        <th>Frequency</th>
                                                        <th>Duration</th>
                                                        <th>Timelines</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody id="dataVerificationTable"> </tbody>
                                            </table>
                                        </div>

                                    </div>
                                </div>
                                <!--End of Data verificaton section-->
                            </div>
                            <!-- end of Quality Assurance page-->

                            <div class="tab-pane" id="DataStorageAccessAndSharing">
                                <h4 class="panel-title" style="margin-left: 70px;">
                                    <b>Data Storage, Access & Sharing</b>
                                </h4>
                                <hr />

                                <div class="panel panel-warning" id="DigitalPnl">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Digital Data</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Reporting level</label>
                                                <div class="col-sm-8">
                                                    <select id="dgtReportingLevel" class="select2 form-control reportingleveldrpdn" multiple data-placeholder="select applicable level">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Thematic area</label>
                                                <div class="col-sm-8">
                                                    <select id="dgtThematicArea" class="select2 form-control" multiple data-placeholder="select applicable area">
                                                        @foreach (var item in Model.thematicAreas)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="VolumeOfdigitalData">Volume of Digital Data</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Provide an estimated figure for the volume of digital data (e.g 20GB)"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <input type="text" placeholder="Provide an estimated figure for the volume of digital data (e.g 20GB)" id="VolumeOfdigitalData" value="" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="DataStorageFormat">Data Storage format</label>
                                                <div class="col-sm-8">
                                                    <select id="DataStorageFormat" class="select2 form-control" data-placeholder="Select Storage type" multiple>
                                                        @foreach (var item in Model.storageformats)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="Storagelocation">Storage Location</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Do you have a specified location for storing data collected ?"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <select class="form-control" onchange="document.getElementById('Storagelocation').value=this.options[this.selectedIndex].text;">
                                                        <option value=""></option>
                                                        <option value="" disabled>please specify if not on the list</option>
                                                        @foreach (var item in Model.storageLoation)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                    <input id="Storagelocation" value="" placeholder="Do you have a specified location for storing data collected?" class="modifiedselect" onfocus="this.select()" type="text">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="Backup">Backup?</label>
                                                <div class="col-sm-8">
                                                    <select id="Backup" class="form-control">
                                                        <option value="" disabled selected>Do you have a back up plan arrangement for data storage?</option>
                                                        @foreach (var item in Model.YesNoOption)
                                                        {
                                                            <option value="@item">@item</option>                                                           
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="Datasecurity">Data Security</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="What security measures are in-place to protect data"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <textarea type="text" placeholder="What security measures are in-place to protect data." id="Datasecurity" class="form-control"></textarea>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="Patientconfidentialitypolicies">Patient Confidentiality Policies</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="What guidelines or policies are in-place for patient confidentiality protection"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <textarea type="text" placeholder="What guidelines or policies are in-place for patient confidentiality protection" id="Patientconfidentialitypolicies" class="form-control"></textarea>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="StorageOfPreExistingData">Storage of Pre-Existing Data</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Provide details of any stored pre-existing data if any (archiving) Describe."><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <textarea type="text" id="StorageOfPreExistingData" class="form-control"></textarea>
                                                </div>
                                                <div class="col-sm-2 col-sm-offset-10">
                                                    <a class="btn btn-black btn-sm btn-outline" id="adddgtbtn">Add to List</a>
                                                </div>
                                            </div>                                            
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr style="color: #FFF;background-color: steelblue;border-color: steelblue;font-size:10px;">
                                                        <th>Level</th>
                                                        <th>Thematic Area</th>
                                                        <th>Volume</th>
                                                        <th>Format</th>
                                                        <th>Location</th>
                                                        <th>Backup</th>
                                                        <th>Security</th>
                                                        <th>Confidentiality Policies</th>
                                                        <th>Pre-existing Data</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody id="digitaldataTable"> </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!--end of Digital data section-->

                                <div class="panel panel-warning" id="NonDigitalPnl">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Non-Digital</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Reporting level</label>
                                                <div class="col-sm-8">
                                                    <select id="ndgtReportingLevel" class="select2 form-control reportingleveldrpdn" multiple data-placeholder="select applicable level">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Thematic area</label>
                                                <div class="col-sm-8">
                                                    <select id="ndgtThematicArea" class="select2 form-control" multiple data-placeholder="select applicable area">
                                                        @foreach (var item in Model.thematicAreas)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="NonDigitalDataTypes">Non-Digital Data Types</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="What types of non-digital data will be collected and stored?"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <select id="NonDigitalDataTypes" class="select2 form-control" data-placeholder="What types of non-digital data will be collected and stored" multiple>
                                                        @foreach (var item in Model.nonDigitalDataTypes)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="NonDigitalStorageLocation">Non-digital Storage Location</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Do you have a specified location for storing non-digital data collected? Describe."><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <input type="text" placeholder="Do you have a specified location for storing non-digital data collected? Describe" id="NonDigitalStorageLocation" class="form-control">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="SafeguardsAndRequirements">Safeguards and Requirements</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Describe any security and environmental requirements for the storage of this data."><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <input type="text" placeholder="Safeguards and Requirements" id="SafeguardsAndRequirements" class="form-control">
                                                </div>
                                                <div class="col-sm-2 col-sm-offset-10">
                                                    <a class="btn btn-black btn-sm btn-outline" id="addndgtbtn">Add to List</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr style="color: #FFF;background-color: steelblue;border-color: steelblue;font-size:10px;">
                                                        <th>Level</th>
                                                        <th>Thematic Area</th>
                                                        <th>Data types</th>
                                                        <th>Storage location</th>
                                                        <th>Safeguards and requirement</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody id="ndigitaldataTable"> </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!--end of non digital data section -->

                                <div class="panel panel-warning" id="DataAccessansSharing">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Data Access and sharing</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Reporting level</label>
                                                <div class="col-sm-8">
                                                    <select id="dasReportingLevel" class="select2 form-control reportingleveldrpdn" multiple data-placeholder="select applicable level">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Thematic area</label>
                                                <div class="col-sm-8">
                                                    <select id="dasThematicArea" class="select2 form-control" multiple data-placeholder="select applicable area">
                                                        @foreach (var item in Model.thematicAreas)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="DataAccess">Data Access</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Indicate whom you will share the data with, and under what conditions include formal agreement"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <textarea type="text" placeholder="Indicate whom you will share the data with, and under what conditions include formal agreement" id="DataAccess" class="form-control"></textarea>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="DataSharingPolicies">Data Sharing Policies</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="What data sharing policies are in-place? Describe"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <textarea type="text" placeholder="What data sharing policies are in-place? Describe" id="DataSharingPolicies" class="form-control"></textarea>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="DataTransmissionPolicies">Data Transmission Policies</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Describe policies for data transimission"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <textarea type="text" placeholder="Describe policies for data transimission" id="DataTransmissionPolicies" class="form-control"></textarea>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="SharingPlatForms">Sharing PlatForms</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="How will data be shared during the active stage of the project?"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <textarea type="text" placeholder="How will data be shared during the active stage of the project?" id="SharingPlatForms" class="form-control"></textarea>
                                                </div>
                                                <div class="col-sm-2 col-sm-offset-10">
                                                    <a class="btn btn-black btn-sm btn-outline" id="adddasbtn">Add to List</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr style="color: #FFF;background-color: steelblue;border-color: steelblue;font-size:10px;">
                                                        <th>Level</th>
                                                        <th>Thematic Area</th>
                                                        <th>Data Access</th>
                                                        <th>Sharing Policies</th>
                                                        <th>Transmission policies</th>
                                                        <th>Sharing platform</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody id="dasTable"> </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <div class="panel panel-warning" id="DataDocumentationManagementAndEntry">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Data Documentation Management and Entry</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Reporting level</label>
                                                <div class="col-sm-8">
                                                    <select id="ddocReportingLevel" class="select2 form-control reportingleveldrpdn" multiple data-placeholder="select applicable level">
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">Thematic area</label>
                                                <div class="col-sm-8">
                                                    <select id="ddocThematicArea" class="select2 form-control" multiple data-placeholder="select applicable area">
                                                        @foreach (var item in Model.thematicAreas)
                                                        {
                                                            <option value="@item">@item</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="StoredDocumentationAndDataDescriptors">Stored Documentation and Data Descriptors</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Do you have any documentation that will accompany any data to help secondary users understand and reuse it? Describe"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <textarea type="text" rows="4" placeholder="Do you have any documentation that will accompany any data to help secondary users understand and reuse it? Describe" id="StoredDocumentationAndDataDescriptors" class="form-control"></textarea>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="NamingStructureAndFilingStructures">Naming Structure and Filing Structures</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Do you have a specific filing structure in-place? Describe the file and folder, naming conventions and systems, codes labellings and/or identifiers"><i class="icon-help"></i></button>
                                                <div class="col-sm-8">
                                                    <textarea type="text" rows="4" placeholder="Do you have a specific filing structure in-place? Describe the file and folder, naming conventions and systems, codes labellings and/or identifiers " id="NamingStructureAndFilingStructures" class="form-control"></textarea>
                                                </div>
                                                <div class="col-sm-2 col-sm-offset-10">
                                                    <a class="btn btn-black btn-sm btn-outline" id="addddocbtn">Add to List</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr style="color: #FFF;background-color: steelblue;border-color: steelblue;font-size:10px;">
                                                        <th>Level</th>
                                                        <th>Thematic Area</th>
                                                        <th>Descriptors</th>
                                                        <th>Naming Structure</th> 
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody id="ddocTable"> </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!-- end of Data Documentation Management and Entry page-->
                            </div>
                            <!-- end of Data Storage, Access and Sharing page-->


                            <div class="tab-pane" id="IntellectualPropertyCopyrightAndOwnership">
                                <h4 class="panel-title" style="margin-left: 70px;">
                                    <b>Intellectual Property Copyright and Ownership</b>
                                </h4>
                                <hr />
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label" for="ContractsAndAgreements">Contracts and Agreements</label>
                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Identify any agreements or contracts that apply to this project"><i class="icon-help"></i></button>
                                        <div class="col-sm-7">
                                            @if (Model.intelProp != null)
                                            {
                                            <textarea type="text" placeholder="Identify any agreements or contracts that apply to this project" id="ContractsAndAgreements" class="form-control">@Model.intelProp.ContractsAndAgreements</textarea>
                                            }
                                            else
                                            {
                                            <textarea type="text" placeholder="Identify any agreements or contracts that apply to this project" id="ContractsAndAgreements" class="form-control"></textarea>
                                            }
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label" for="Ownership">Ownership</label>
                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="State who will own the copyright and other IP of any data that you will collect "><i class="icon-help"></i></button>
                                        <div class="col-sm-7">
                                            @if (Model.intelProp != null)
                                            {
                                            <textarea type="text" placeholder="State who will own the copyright and other IP of any data that you will collect " id="Ownership" class="form-control">@Model.intelProp.Ownership</textarea>
                                            }
                                            else
                                            {
                                            <textarea type="text" placeholder="State who will own the copyright and other IP of any data that you will collect " id="Ownership" class="form-control"></textarea>
                                            }
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label" for="UseOfThirdPartyDataSources">Use of Third Party Data Sources</label>
                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Describe guidelines for use of 3rd party data sources"><i class="icon-help"></i></button>
                                        <div class="col-sm-7">
                                            @if (Model.intelProp != null)
                                            {
                                            <textarea type="text" placeholder="Describe guidelines for use of 3rd party data sources" id="UseOfThirdPartyDataSources" class="form-control">@Model.intelProp.UseOfThirdPartyDataSources</textarea>
                                            }
                                            else
                                            {
                                            <textarea type="text" placeholder="Describe guidelines for use of 3rd party data sources" id="UseOfThirdPartyDataSources" class="form-control"></textarea>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- end of Intellectual Property Copyright And Ownership page-->

                            <div class="tab-pane" id="PostProjectDataRetentionSharingAndDestruction">
                                <h4 class="panel-title" style="margin-left: 70px;">
                                    <b>Post Project Data Retention Sharing and Destruction</b>
                                </h4>
                                <hr />
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label" for="DataToRetain">Data To Retain</label>
                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Have you thought about a long term archive for your data? Indicate archiving processes Describe "><i class="icon-help"></i></button>
                                        <div class="col-sm-7">
                                            @if (Model.ppData != null)
                                            {
                                            <textarea type="text" placeholder="Have you thought about a long term archive for your data? Indicate archiving processes Describe" rows="4" id="DataToRetain" class="form-control">@Model.ppData.DataToRetain</textarea>
                                            }
                                            else
                                            {
                                            <textarea type="text" placeholder="Have you thought about a long term archive for your data? Indicate archiving processes Describe" rows="4" id="DataToRetain" class="form-control"></textarea>
                                            }
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label" for="PreExistingData">Pre-Existing Data</label>
                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="How long do curators/agencies of pre-existing data intend data to be archieved for?  If applicable describe"><i class="icon-help"></i></button>
                                        <div class="col-sm-7">
                                            @if (@Model.ppData != null)
                                            {
                                            <textarea type="text" placeholder="How long do curators/agencies of pre-existing data intend data to be archieved for?  If applicable describe" rows="4" id="PreExistingData" class="form-control">@Model.ppData.PreExistingData</textarea>
                                            }
                                            else
                                            {
                                            <textarea type="text" placeholder="How long do curators/agencies of pre-existing data intend data to be archieved for?  If applicable describe" rows="4" id="PreExistingData" class="form-control"></textarea>
                                            }

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label" for="Duration">Duration</label>
                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Do you have a specified duration for data retention? How will the data be destroyed if applicable? Describe"><i class="icon-help"></i></button>
                                        <div class="col-sm-7">
                                            @if (@Model.ppData != null)
                                            {
                                            <textarea type="text" rows="4" placeholder="Do you have a specified duration for data retention? How will the data be destroyed if applicable? Describe" id="Duration" class="form-control">@Model.ppData.Duration</textarea>
                                            }
                                            else
                                            {
                                            <textarea type="text" rows="4" placeholder="Do you have a specified duration for data retention? How will the data be destroyed if applicable? Describe" id="Duration" class="form-control"></textarea>
                                            }

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label" for="Licensing">Licensing</label>
                                        <button type="button" class="btn btn-black btn-outline btn-sm" title="Under what licensing will you share the data? If applicable describe"><i class="icon-help"></i></button>
                                        <div class="col-sm-7">
                                            @if (@Model.ppData != null)
                                            {
                                            <textarea type="text" placeholder="Under what licensing will you share the data? If applicable describe" id="Licensing" class="form-control">@Model.ppData.Licensing</textarea>
                                            }
                                            else
                                            {
                                            <textarea type="text" placeholder="Under what licensing will you share the data? If applicable describe" id="Licensing" class="form-control"></textarea>
                                            }

                                        </div>
                                    </div>
                                </div>

                                <div class="panel panel-warning" id="DigitalDataRetention">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Digital Data Retention</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="DataRetention">Data Retention</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Indicate storage type,  repository name, location and estimated cost of archiving"><i class="icon-help"></i></button>
                                                <div class="col-sm-7">
                                                    @if (@Model.ppData != null)
                                                    {
                                                    <textarea type="text" placeholder="Indicate storage type,  repository name, location and estimated cost of archiving" id="DataRetention" class="form-control">@Model.ppData.DigitalDataRetention.DataRetention</textarea>
                                                    }
                                                    else
                                                    {
                                                    <textarea type="text" placeholder="Indicate storage type,  repository name, location and estimated cost of archiving" id="DataRetention" class="form-control"></textarea>
                                                    }

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end of digital data retention-->

                                <div class="panel panel-warning" id="NonDigitalDataRetention">
                                    <div class="panel-heading clearfix">
                                        <h4 class="panel-title">Non Digital Data Retention</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label" for="nonDigitalDataRetention">Data Retention</label>
                                                <button type="button" class="btn btn-black btn-outline btn-sm" title="Indicate storage type,  repository name, location and estimated cost of archiving"><i class="icon-help"></i></button>
                                                <div class="col-sm-7">
                                                    @if (@Model.ppData != null)
                                                    {
                                                    <textarea type="text" placeholder="Indicate storage type,  repository name, location and estimated cost of archiving" id="nonDigitalDataRetention" class="form-control">@Model.ppData.NonDigitalRentention.DataRention</textarea>
                                                    }
                                                    else
                                                    {
                                                    <textarea type="text" placeholder="Indicate storage type,  repository name, location and estimated cost of archiving" id="nonDigitalDataRetention" class="form-control"></textarea>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--End of non digital data rentention-->
                            </div>
                            <!-- end of Post Project Data Retention Sharing and Destruction page-->


                            <ul class="pager wizard">
                                <li class="previous"><a href="javascript:void(0)"><i class="icon-left-open"></i>Previous</a></li>
                                <li id="nextbtn" class="next"><a id="SaveNext" href="javascript:void(0)">Save and Next<i class="icon-right-open"></i></a> </li>
                                <li id="finish" style="float: right;" class="removeVisibility">
                                    <a id="finishbtn" href="javascript:void(0)">
                                        Finish and Preview<i class="icon-right-open"></i>
                                    </a>
                                    <img id="finishSpinner" style="display:none" class="center" src="~/images/spinner.gif" width="36">
                                </li>
                            </ul>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" style="width: 400px;" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Message</h4>
            </div>
            <div class="modal-body">

                Not allowed
            </div>
        </div>
    </div>
</div>


@section Scripts
{     
@Scripts.Render("~/bundles/MultiDatePickerCss")
 

    <script>
        $(document).ready(function () {
             

            $(".select2.select2-container.select2-container--default").css("width", "100%");
            $(".select2-search__field").css("width", "200%");
                      

            base64Image = '@Model.DataFlowChart';
            if(base64Image !=undefined){
                BindPureBase64StringToControl($('#FlowChartimageURL'), base64Image)
            }

            //used for page load
            var EthicalApprovalForTheProject = $("#EthicalApprovalForTheProject")[0].value
            if (EthicalApprovalForTheProject == "No") {
                $("#EthicalApprovalDiv").hide()
            }
             

            $("input").attr("autocomplete", "off");
         
            if (documentID == "") {
                updateUrl = '@Url.Action("SaveNext", "DMPDocument")';
            }
            else {
                updateUrl = '@Url.Action("EditDocumentNext", "DMPDocument")'
            }

            function SaveAndContinue(e) {
                $("#loadImg").show();

                var formdata = $('#rootwizard-2')[0].elements;
                var viewModel = {};
                $.each(formdata, function (name, formElements) {
                    viewModel[formElements.id] = formElements.value;
                });
                viewModel["documentID"] = documentID;
                if (base64Image != undefined) {
                    viewModel["DataFlowChart"] = base64Image;
                }
                viewModel["reportDataList"] = reportArray; 
                viewModel["Trainings"] = trainingArray;  
                viewModel["dataVerification"] = DataVerificationArray; 
                
                viewModel["roles"] = rolesArray;
                viewModel["responsibilities"]= responsibilityArray;
                viewModel["DataCollection"] = datacollectionArray;
                viewModel["dataCollation"] = datacollationArray;

                viewModel["reportingLevel"] = reportingLevelArray;

                viewModel["dataDocMgt"] = ddocDatacollectionArray;
                viewModel["digital"] = digitalDatacollectionArray;
                viewModel["nonDigital"] = nondigitalDatacollectionArray;
                viewModel["dataSharing"] = dasDatacollectionArray;


                let selectedStates = '';
                $("#StatesCoveredByImplementingPartners option:selected").each(function(){
                    selectedStates +=$(this).val()+',';
                });
                viewModel["StatesCoveredByImplementingPartners"] = selectedStates;

                let selectedTools='';
                $("#DataSourceCollectionAndReportingTools option:selected").each(function(){
                    selectedTools +=$(this).val()+',';
                });
                viewModel["DataSourceCollectionAndReportingTools"] = selectedTools;

                let selectedDataStorageFormat ='';
                $("#DataStorageFormat option:selected").each(function(){
                    selectedDataStorageFormat +=$(this).val()+',';
                });
                viewModel["DataStorageFormat"] = selectedDataStorageFormat;

                let selectednondigitaltypes = '';
                $("#NonDigitalDataTypes option:selected").each(function(){
                    selectednondigitaltypes +=$(this).val()+',';
                });
                viewModel["NonDigitalDataTypes"] = selectednondigitaltypes;


                $.ajax({
                    type: "POST",
                    url: updateUrl,
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(viewModel),
                    dataType: 'json',
                    cache: false,
                }).done(function (result) {
                    if (result != undefined && result.documentId != undefined) {
                        documentID = result.documentId;
                        updateUrl = '@Url.Action("EditDocumentNext", "DMPDocument")'
                    }
                    if (e.currentTarget.id === "finishbtn") {
                        window.location.href = "/DocumentViewer/DocumentPreview?documnentId="+documentID;
                    }
                    var nxtcss = document.getElementById("nextbtn").className; //$("#nextbtn").attr('class');
                    if (nxtcss === "next disabled") {
                        document.getElementById("finish").className = 
                            document.getElementById("finish").className.replace(new RegExp('(?:^|\\s)'+ 'removeVisibility' + '(?:\\s|$)'), ' ');
                        //$("#finish").removeClass("removeVisibility");
                    }
                    $("#loadImg").hide();
                }).error(function (xhr, status, err) {
                    $("#loadImg").hide();
                    alert(err);
                    console.log(err);
                });
            }

            $("#SaveNext,#finishbtn").click(function (e, n) { 
                if (e.currentTarget.id === "finishbtn") {
                    $("#finishSpinner").show();
                }
                SaveAndContinue(e);
        });

        $('#TimelinesForReporting').multiDatesPicker(); 
        $("#TimelinesForDataVerification").multiDatesPicker();
                     
        $("#ProjectStartDate").multiDatesPicker({maxPicks: 1 });
        $("#ProjectEndDate").multiDatesPicker({maxPicks: 1 });
             
        });
    </script>

@Scripts.Render("~/bundles/dmpScripts")
}
